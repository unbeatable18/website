<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lived Experiences & Perspectives</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <script src="https://unpkg.com/leaflet.motion/dist/leaflet.motion.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap');
        
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            background-image: radial-gradient(circle at 1px 1px, #374151 1px, transparent 0);
            background-size: 20px 20px;
            transition: opacity 0.3s ease-in-out;
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        .page-fade-out {
            animation: fadeOut 0.3s ease-in-out forwards;
        }

        #map {
            height: 100%;
            width: 100%;
            border-radius: 0.75rem;
            border: 1px solid #374151;
            z-index: 10;
        }

        .leaflet-popup-content-wrapper {
            border-radius: 0.75rem;
            background: #111827;
            border: 1px solid #4b5563;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
            padding: 0;
            min-width: 360px;
            max-width: 420px !important;
            overflow: hidden;
        }
        .leaflet-popup-content { margin: 0; width: 100% !important; }
        .leaflet-popup-tip { background: #111827; }
        .popup-header { position: relative; }
        .popup-image { width: 100%; height: 160px; object-fit: cover; display: block; }
        .popup-image-overlay { position: absolute; bottom: 0; left: 0; right: 0; height: 80%; background: linear-gradient(to top, rgba(17, 24, 39, 1) 20%, rgba(17, 24, 39, 0)); }
        .popup-title-container { position: absolute; bottom: 1rem; left: 1rem; right: 1rem; color: white; }
        .popup-title { font-size: 24px; font-weight: 900; line-height: 1.2; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .popup-subtitle { font-size: 15px; font-weight: 500; color: #d1d5db; opacity: 0.9; text-shadow: 0 1px 3px rgba(0,0,0,0.5); }
        .popup-description { padding: 1.25rem; color: #9ca3af; font-size: 15px; line-height: 1.6; }
         .sub-popup-content { padding: 1.25rem; }
        .sub-popup-content b { font-size: 18px; color: #f9fafb; font-weight: 700; display: block; margin-bottom: 8px; }
        .sub-popup-content p { color: #9ca3af; font-size: 15px; line-height: 1.6; }
        
        .glass-card {
            background: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(55, 65, 81, 0.5);
        }

        .gradient-text {
            background: linear-gradient(to right, #38bdf8, #a78bfa, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(167, 139, 250, 0.25);
        }
        
        .location-list li {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border-left: 2px solid transparent;
        }
        .location-list li:hover, .location-list li.active {
            background-color: rgba(55, 65, 81, 0.3);
            border-left: 2px solid #a78bfa;
            transform: translateX(5px);
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(167, 139, 250, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(167, 139, 250, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(167, 139, 250, 0); }
        }
        .pulsing-icon-div {
            animation: pulse 2.5s infinite cubic-bezier(0.66, 0, 0, 1);
        }

        .leaflet-marker-icon.highlight .pulsing-icon-div,
        .leaflet-marker-icon.highlight .ubc-icon-svg {
            transform-origin: center;
            transform: scale(1.5);
            transition: transform 0.2s ease-out;
        }

        .flight-path-dot { filter: drop-shadow(0 0 4px #a78bfa); }
        .flight-path-dot-intl { filter: drop-shadow(0 0 4px #f59e0b); }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-900 text-slate-300 antialiased h-screen flex flex-col">

    <div class="p-4 md:p-8 fade-in flex flex-col flex-grow relative">
        <a href="./index.html" id="home-logo-link" class="absolute top-6 left-6 z-50 text-slate-400 hover:text-white transition-all duration-200 hover:scale-110" title="Return to Portfolio">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
            </svg>
        </a>

        <header class="text-center mb-6 flex-shrink-0">
            <h1 class="text-4xl md:text-5xl font-black gradient-text">Lived Experiences & Perspectives</h1>
            <p class="mt-2 text-lg text-slate-400">An interactive journey from 2020 - 2024</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 flex-grow min-h-0">
            
            <aside class="lg:col-span-1 glass-card rounded-xl p-6 h-fit overflow-y-auto">
                <h2 class="text-xl font-bold text-white mb-4 border-b border-gray-700 pb-2">Destinations</h2>
                <ul id="location-list" class="space-y-2 location-list mb-6">
                    </ul>
                <button id="global-view-btn" class="w-full text-center p-3 rounded-lg bg-gray-700/50 hover:bg-gray-700 transition-colors duration-200 text-white font-semibold flex items-center justify-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.997 5.997 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v1.5a1.5 1.5 0 01-1.5 1.5h-5A1.5 1.5 0 015 14.5V13a2 2 0 00-2-2H2.083A5.997 5.997 0 014 10c0-.34.028-.675.083-1h1.249a2 2 0 001.943-1.523z" clip-rule="evenodd" />
                    </svg>
                    <span>North America</span>
                </button>
            </aside>
            
            <main class="lg:col-span-3">
                <div id="map"></div>
            </main>
        </div>

        <footer class="text-center mt-6 text-slate-500 flex-shrink-0">
            <p>Select a destination or click a marker to explore.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Page Transition Logic for Home Logo ---
            const homeLogoLink = document.getElementById('home-logo-link');
            homeLogoLink.addEventListener('click', function(e) {
                e.preventDefault(); 
                const destination = this.href;
                document.body.classList.add('page-fade-out');
                setTimeout(() => {
                    window.location.href = destination;
                }, 300);
            });

            const mapData = [
                { id: 'vancouver', mainPin: { coords: [49.2606, -123.2460], title: 'UBC Economics', subtitle: 'Home Base', description: 'Where it all began. My academic home from 2020-2024, studying International Economics at the University of British Columbia.', image: 'https://source.unsplash.com/400x400/?ubc,vancouver' }, subPins: [] },
                { id: 'toronto', mainPin: { coords: [43.6532, -79.3832], title: 'Toronto', subtitle: 'Queen City', description: 'Exploring Canada’s largest city and the heart of its financial industry. A fantastic opportunity to see a different economic and cultural hub.', image: 'https://source.unsplash.com/400x400/?toronto,skyline' }, subPins: [] },
                { id: 'florida', mainPin: { coords: [28.5383, -81.3792], title: 'Orlando', subtitle: 'WaltDisney World', description: 'Orlando feels like stepping through a portal into different universes. It’s surreal—less a vacation, more an immersion into meticulously crafted realities.', image: 'https://source.unsplash.com/400x400/?disney,castle' }, subPins: [ { coords: [28.4177, -81.5812], title: 'Magic Kingdom & Tron Ride', description: 'Tron was pure adrenaline. The rest of the park hit nostalgia hard; seeing the castle in person is as magical as you hope.' }, { coords: [28.3747, -81.5494], title: 'EPCOT', description: 'A whirlwind tour of the world in an afternoon. Pastries in “France,” pyramids in “Mexico.” It’s curated, fast, and unforgettable.' }, { coords: [28.3574, -81.5583], title: 'Hollywood Studios', description: 'Walking through a Star Wars marketplace made you feel part of the story. Immersive and cinematic.' }, { coords: [28.3597, -81.5913], title: 'Almost Animal Kingdom', description: 'We ran out of steam. Missing it was a reminder: you can’t do it all, and that’s reason enough to return.' }, { coords: [30.4383, -84.2807], title: 'Tallahassee: A Reset', description: 'After Orlando’s overstimulation, Tallahassee offered calm and authenticity. Time slowed, the energy was human-scale, and family rhythms set the pace.', main: true }, { coords: [30.3428, -84.3725], title: 'Wakulla & Franklin County Rivers', description: 'Floating down the Wakulla River was quiet, beautiful, meditative. Nature’s pace contrasted sharply with the engineered chaos of Orlando.' }, ] },
                { id: 'new-york', mainPin: { coords: [40.7128, -74.0060], title: 'New York', subtitle: 'Intensity', description: 'New York isn’t just seen; it’s felt. Walking the streets, grabbing food on the go, and absorbing constant energy is how you experience its pulse.', image: 'https://source.unsplash.com/400x400/?new,york,city' }, subPins: [ { coords: [40.7580, -73.9855], title: 'Pizza & Bagels', description: 'More than food. They’re the city’s democratic culinary backbone. Eating them while moving is a New York ritual.' }, { coords: [40.7615, -73.9772], title: 'Nike, Oculus, & Grand Central', description: 'Moments of awe: a futuristic museum-like store, a striking transit hub, and a timeless landmark. Each shows a layer of the city’s personality.' }, { coords: [40.7422, -74.0094], title: 'Chelsea & Little Island', description: 'Little Island’s creative energy, Chelsea Market’s chaos and flavor—both show how urban spaces can delight on human and commercial scales.' }, { coords: [40.7495, -73.9682], title: 'UN Headquarters', description: 'Standing outside, seeing the flags, is quietly humbling—a reminder of global connection amidst city bustle.' }, { coords: [40.6928, -73.9906], title: 'Brooklyn Streets', description: 'Slower, tree-lined, intimate. Brooklyn contrasts Manhattan’s scale and pace, offering breathing room for human-scale life.' }, { coords: [40.7527, -73.9772], title: 'The Metro', description: 'Loud, crowded, chaotic—but riding it is essential to understanding the city’s real rhythm.' }, ] },
                { id: 'dc', mainPin: { coords: [38.9072, -77.0369], title: 'Washington DC', subtitle: 'Tangible History', description: 'The National Mall is immersive: monuments, the Capitol, history in every step. It’s the kind of city where you feel the past under your feet.', image: 'https://source.unsplash.com/400x400/?washington,dc,capitol' }, subPins: [ { coords: [38.8879, -77.0210], title: 'International Spy Museum', description: 'Interactive, playful, yet insightful. It reframed the city through a lens of secrecy, intelligence, and hidden narratives.' } ] },
                { id: 'niagara', mainPin: { coords: [43.0830, -79.0742], title: 'Niagara Falls', subtitle: 'Raw Power & Wonder', description: 'Photos don’t prepare you. The roar, the mist, the sheer scale—it’s overwhelming in a way that’s both humbling and exhilarating.', image: 'https://source.unsplash.com/400x400/?niagara,falls' }, subPins: [ { coords: [43.0800, -79.0760], title: 'Maid of the Mist', description: 'Poncho on, soaking wet, face-to-face with the falls. You feel tiny, awestruck, alive.' }, { coords: [43.0787, -79.0789], title: 'Journey Behind the Falls', description: 'Standing inside tunnels behind the water, vibrations resonate through your chest. It’s the waterfall from the inside out.' } ] }
            ];

            const map = L.map('map', { zoomControl: false }).setView([45, -98], 4);
            L.control.zoom({ position: 'bottomright' }).addTo(map);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { maxZoom: 20, attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>' }).addTo(map);
            setTimeout(() => map.invalidateSize(), 100);
            
            const ubcIcon = L.divIcon({ className: 'custom-div-icon', html: `<svg class="w-8 h-8 ubc-icon-svg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" style="filter: drop-shadow(0 0 8px rgba(56,189,248,0.7));"><path d="M50 10 L90 50 L50 90 L10 50 Z" stroke="#38bdf8" stroke-width="8" stroke-linejoin="round" /><circle cx="50" cy="50" r="15" fill="#38bdf8" /></svg>`, iconSize: [32, 32], iconAnchor: [16, 16], popupAnchor: [0, -16] });
            const mainPinIcon = L.divIcon({ className: 'custom-div-icon', html: `<div class="w-6 h-6 bg-purple-500 rounded-full border-2 border-white shadow-lg pulsing-icon-div"></div>`, iconSize: [24, 24], iconAnchor: [12, 12], popupAnchor: [0, -12] });
            const subPinIcon = L.divIcon({ className: 'custom-div-icon', html: `<div class="w-4 h-4 bg-gray-900 rounded-full border-2 border-rose-500 shadow-md" style="box-shadow: 0 0 6px #f43f5e;"></div>`, iconSize: [16, 16], iconAnchor: [8, 8], popupAnchor: [0, -8] });
            
            const locationList = document.getElementById('location-list');
            const markers = {};

            mapData.forEach(region => {
                const popupContent = `<div class="popup-header"><img src="${region.mainPin.image}" alt="${region.mainPin.title}" class="popup-image" onerror="this.onerror=null;this.src='https://placehold.co/400x400/111827/d1d5db?text=Image';"><div class="popup-image-overlay"></div><div class="popup-title-container"><h3 class="popup-title">${region.mainPin.title}</h3><p class="popup-subtitle">${region.mainPin.subtitle}</p></div></div><div class="popup-description">${region.mainPin.description}</div>`;
                const iconToUse = region.id === 'vancouver' ? ubcIcon : mainPinIcon;
                const mainPinMarker = L.marker(region.mainPin.coords, { icon: iconToUse }).addTo(map).bindPopup(popupContent);
                markers[region.id] = mainPinMarker;
                
                region.subPins.forEach(subPin => {
                    const icon = subPin.main ? mainPinIcon : subPinIcon;
                    const subPopupContent = `<div class="sub-popup-content"><b>${subPin.title}</b><p>${subPin.description}</p></div>`;
                    L.marker(subPin.coords, { icon: icon }).addTo(map).bindPopup(subPopupContent);
                });

                const li = document.createElement('li');
                li.className = 'p-3 rounded-md text-slate-300 flex items-center space-x-3';
                li.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-purple-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg><div><span class="font-bold text-white">${region.mainPin.title}</span><span class="text-sm text-slate-400 block">${region.mainPin.subtitle}</span></div>`;

                li.addEventListener('mouseover', () => mainPinMarker.getElement().classList.add('highlight'));
                li.addEventListener('mouseout', () => mainPinMarker.getElement().classList.remove('highlight'));
                li.addEventListener('click', () => {
                    document.querySelectorAll('#location-list li').forEach(item => item.classList.remove('active'));
                    li.classList.add('active');
                    map.flyTo(region.mainPin.coords, 8, { animate: true, duration: 1.5 });
                    setTimeout(() => mainPinMarker.openPopup(), 1600);
                });
                locationList.appendChild(li);
            });
            
            const naPathCoords = [ [49.2606, -123.2460], [40.7128, -74.0060], [43.6532, -79.3832], [49.2606, -123.2460], [30.4383, -84.2807], [28.5383, -81.3792], [40.7128, -74.0060], [38.9072, -77.0369], [43.6532, -79.3832], [49.2606, -123.2460] ];
            
            L.motion.polyline(naPathCoords, { color: "#a78bfa", weight: 2, opacity: 0.8, dashArray: '5, 10' }, { auto: true, duration: 25000, easing: L.Motion.Ease.easeInOutQuart }, { removeOnEnd: false, showMarker: true, icon: L.divIcon({ html: `<div class="w-3 h-3 bg-white rounded-full shadow-lg flight-path-dot"></div>`, iconSize: [12, 12] }) }).addTo(map);

            document.getElementById('global-view-btn').addEventListener('click', () => {
                map.flyTo([45, -98], 4, { animate: true, duration: 1.5 });
                document.querySelectorAll('#location-list li').forEach(item => item.classList.remove('active'));
            });
        });
    </script>
</body>
</html>
